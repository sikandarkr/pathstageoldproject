{"ast":null,"code":"import \"antd/lib/spin/style\";\nimport _Spin from \"antd/lib/spin\";\nimport \"antd/lib/typography/style\";\nimport _Typography from \"antd/lib/typography\";\nimport \"antd/lib/title/style\";\nimport _Title from \"antd/lib/title\";\nvar _jsxFileName = \"/Users/sikandarkumarkumar/Desktop/Others/exampl/pages/profile.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport format from \"date-fns/format\";\nimport Link from \"next/link\";\nimport ProfileTabs from \"../components/profile/ProfileTabs\";\nimport DeleteUser from \"../components/profile/DeleteUser\";\nimport FollowUser from \"../components/profile/FollowUser\";\nimport { authInitialProps } from \"../lib/auth\";\nimport { getUser, getPostsByUser, deletePost, likePost, unlikePost, addComment, deleteComment } from \"../lib/api\";\n\nclass Profile extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      user: null,\n      posts: [],\n      isAuth: false,\n      isFollowing: false,\n      isLoading: true,\n      isDeletingPost: false\n    });\n\n    _defineProperty(this, \"checkFollow\", (auth, user) => {\n      return user.followers.findIndex(follower => follower._id === auth.user._id) > -1;\n    });\n\n    _defineProperty(this, \"toggleFollow\", sendRequest => {\n      const {\n        userId\n      } = this.props;\n      const {\n        isFollowing\n      } = this.state;\n      sendRequest(userId).then(() => {\n        this.setState({\n          isFollowing: !isFollowing\n        });\n      });\n    });\n\n    _defineProperty(this, \"handleDeletePost\", deletedPost => {\n      this.setState({\n        isDeletingPost: true\n      });\n      deletePost(deletedPost._id).then(postData => {\n        const postIndex = this.state.posts.findIndex(post => post._id === postData._id);\n        const updatedPosts = [...this.state.posts.slice(0, postIndex), ...this.state.posts.slice(postIndex + 1)];\n        this.setState({\n          posts: updatedPosts,\n          isDeletingPost: false\n        });\n      }).catch(err => {\n        console.error(err);\n        this.setState({\n          isDeletingPost: false\n        });\n      });\n    });\n\n    _defineProperty(this, \"handleToggleLike\", post => {\n      const {\n        auth\n      } = this.props;\n      const isPostLiked = post.likes.includes(auth.user._id);\n      const sendRequest = isPostLiked ? unlikePost : likePost;\n      sendRequest(post._id).then(postData => {\n        const postIndex = this.state.posts.findIndex(post => post._id === postData._id);\n        const updatedPosts = [...this.state.posts.slice(0, postIndex), postData, ...this.state.posts.slice(postIndex + 1)];\n        this.setState({\n          posts: updatedPosts\n        });\n      }).catch(err => console.error(err));\n    });\n\n    _defineProperty(this, \"handleAddComment\", (postId, text) => {\n      const comment = {\n        text\n      };\n      addComment(postId, comment).then(postData => {\n        const postIndex = this.state.posts.findIndex(post => post._id === postData._id);\n        const updatedPosts = [...this.state.posts.slice(0, postIndex), postData, ...this.state.posts.slice(postIndex + 1)];\n        this.setState({\n          posts: updatedPosts\n        });\n      }).catch(err => console.error(err));\n    });\n\n    _defineProperty(this, \"handleDeleteComment\", (postId, comment) => {\n      deleteComment(postId, comment).then(postData => {\n        const postIndex = this.state.posts.findIndex(post => post._id === postData._id);\n        const updatedPosts = [...this.state.posts.slice(0, postIndex), postData, ...this.state.posts.slice(postIndex + 1)];\n        this.setState({\n          posts: updatedPosts\n        });\n      }).catch(err => console.error(err));\n    });\n\n    _defineProperty(this, \"formatDate\", date => format(date, \"dddd, MMMM Do, YYYY\"));\n  }\n\n  componentDidMount() {\n    const {\n      userId,\n      auth\n    } = this.props;\n    getUser(userId).then(async user => {\n      const isAuth = auth.user._id === userId;\n      const isFollowing = this.checkFollow(auth, user);\n      const posts = await getPostsByUser(userId);\n      this.setState({\n        user,\n        posts,\n        isAuth,\n        isFollowing,\n        isLoading: false\n      });\n    });\n  }\n\n  render() {\n    const {\n      classes,\n      auth\n    } = this.props;\n    const {\n      isLoading,\n      posts,\n      user,\n      isAuth,\n      isFollowing,\n      isDeletingPost\n    } = this.state;\n    return __jsx(Paper, {\n      className: classes.root,\n      elevation: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 7\n      }\n    }, __jsx(_Typography, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }\n    }, __jsx(_Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 10\n      }\n    }, \"Introduction\")), isLoading ? __jsx(_Spin, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 13\n      }\n    }) : __jsx(List, {\n      dense: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 11\n      }\n    }, __jsx(ListItem, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 13\n      }\n    }, __jsx(ListItemAvatar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 15\n      }\n    }, __jsx(Avatar, {\n      src: user.avatar,\n      className: classes.bigAvatar,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }\n    })), __jsx(ListItemText, {\n      primary: user.name,\n      secondary: user.email,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 15\n      }\n    }), isAuth ? __jsx(ListItemSecondaryAction, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }\n    }, __jsx(Link, {\n      href: \"/edit-profile\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 19\n      }\n    }, __jsx(\"a\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 21\n      }\n    }, __jsx(IconButton, {\n      color: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 23\n      }\n    }, __jsx(Edit, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 25\n      }\n    })))), __jsx(DeleteUser, {\n      user: user,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 19\n      }\n    })) : __jsx(FollowUser, {\n      isFollowing: isFollowing,\n      toggleFollow: this.toggleFollow,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }\n    })), __jsx(Divider, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 13\n      }\n    }), __jsx(ListItem, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 13\n      }\n    }, __jsx(ListItemText, {\n      primary: user.about,\n      secondary: `Joined: ${this.formatDate(user.createdAt)}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 15\n      }\n    })), __jsx(ProfileTabs, {\n      auth: auth,\n      posts: posts,\n      user: user,\n      isDeletingPost: isDeletingPost,\n      handleDeletePost: this.handleDeletePost,\n      handleToggleLike: this.handleToggleLike,\n      handleAddComment: this.handleAddComment,\n      handleDeleteComment: this.handleDeleteComment,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 13\n      }\n    })));\n  }\n\n}\n\nconst styles = theme => ({\n  root: {\n    padding: theme.spacing.unit * 3,\n    marginTop: theme.spacing.unit * 5,\n    margin: \"auto\",\n    [theme.breakpoints.up(\"sm\")]: {\n      width: 600\n    }\n  },\n  title: {\n    color: theme.palette.primary.main\n  },\n  progress: {\n    margin: theme.spacing.unit * 2\n  },\n  progressContainer: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    flexDirection: \"column\"\n  },\n  bigAvatar: {\n    width: 60,\n    height: 60,\n    margin: 10\n  }\n});\n\nProfile.getInitialProps = authInitialProps(true);\nexport default withStyles(styles)(Profile);","map":{"version":3,"sources":["/Users/sikandarkumarkumar/Desktop/Others/exampl/pages/profile.js"],"names":["format","Link","ProfileTabs","DeleteUser","FollowUser","authInitialProps","getUser","getPostsByUser","deletePost","likePost","unlikePost","addComment","deleteComment","Profile","React","Component","user","posts","isAuth","isFollowing","isLoading","isDeletingPost","auth","followers","findIndex","follower","_id","sendRequest","userId","props","state","then","setState","deletedPost","postData","postIndex","post","updatedPosts","slice","catch","err","console","error","isPostLiked","likes","includes","postId","text","comment","date","componentDidMount","checkFollow","render","classes","root","avatar","bigAvatar","name","email","toggleFollow","about","formatDate","createdAt","handleDeletePost","handleToggleLike","handleAddComment","handleDeleteComment","styles","theme","padding","spacing","unit","marginTop","margin","breakpoints","up","width","title","color","palette","primary","main","progress","progressContainer","display","alignItems","justifyContent","flexDirection","height","getInitialProps","withStyles"],"mappings":"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","sourcesContent":["import format from \"date-fns/format\";\nimport Link from \"next/link\";\nimport { Spin ,Typography,Title} from 'antd';\nimport ProfileTabs from \"../components/profile/ProfileTabs\";\nimport DeleteUser from \"../components/profile/DeleteUser\";\nimport FollowUser from \"../components/profile/FollowUser\";\nimport { authInitialProps } from \"../lib/auth\";\nimport {\n  getUser,\n  getPostsByUser,\n  deletePost,\n  likePost,\n  unlikePost,\n  addComment,\n  deleteComment\n} from \"../lib/api\";\n\nclass Profile extends React.Component {\n  state = {\n    user: null,\n    posts: [],\n    isAuth: false,\n    isFollowing: false,\n    isLoading: true,\n    isDeletingPost: false\n  };\n\n  componentDidMount() {\n    const { userId, auth } = this.props;\n\n    getUser(userId).then(async user => {\n      const isAuth = auth.user._id === userId;\n      const isFollowing = this.checkFollow(auth, user);\n      const posts = await getPostsByUser(userId);\n      this.setState({\n        user,\n        posts,\n        isAuth,\n        isFollowing,\n        isLoading: false\n      });\n    });\n  }\n\n  checkFollow = (auth, user) => {\n    return (\n      user.followers.findIndex(follower => follower._id === auth.user._id) > -1\n    );\n  };\n\n  toggleFollow = sendRequest => {\n    const { userId } = this.props;\n    const { isFollowing } = this.state;\n\n    sendRequest(userId).then(() => {\n      this.setState({ isFollowing: !isFollowing });\n    });\n  };\n\n  handleDeletePost = deletedPost => {\n    this.setState({ isDeletingPost: true });\n    deletePost(deletedPost._id)\n      .then(postData => {\n        const postIndex = this.state.posts.findIndex(\n          post => post._id === postData._id\n        );\n        const updatedPosts = [\n          ...this.state.posts.slice(0, postIndex),\n          ...this.state.posts.slice(postIndex + 1)\n        ];\n        this.setState({\n          posts: updatedPosts,\n          isDeletingPost: false\n        });\n      })\n      .catch(err => {\n        console.error(err);\n        this.setState({ isDeletingPost: false });\n      });\n  };\n\n  handleToggleLike = post => {\n    const { auth } = this.props;\n\n    const isPostLiked = post.likes.includes(auth.user._id);\n    const sendRequest = isPostLiked ? unlikePost : likePost;\n    sendRequest(post._id)\n      .then(postData => {\n        const postIndex = this.state.posts.findIndex(\n          post => post._id === postData._id\n        );\n        const updatedPosts = [\n          ...this.state.posts.slice(0, postIndex),\n          postData,\n          ...this.state.posts.slice(postIndex + 1)\n        ];\n        this.setState({ posts: updatedPosts });\n      })\n      .catch(err => console.error(err));\n  };\n\n  handleAddComment = (postId, text) => {\n    const comment = { text };\n    addComment(postId, comment)\n      .then(postData => {\n        const postIndex = this.state.posts.findIndex(\n          post => post._id === postData._id\n        );\n        const updatedPosts = [\n          ...this.state.posts.slice(0, postIndex),\n          postData,\n          ...this.state.posts.slice(postIndex + 1)\n        ];\n        this.setState({ posts: updatedPosts });\n      })\n      .catch(err => console.error(err));\n  };\n\n  handleDeleteComment = (postId, comment) => {\n    deleteComment(postId, comment)\n      .then(postData => {\n        const postIndex = this.state.posts.findIndex(\n          post => post._id === postData._id\n        );\n        const updatedPosts = [\n          ...this.state.posts.slice(0, postIndex),\n          postData,\n          ...this.state.posts.slice(postIndex + 1)\n        ];\n        this.setState({ posts: updatedPosts });\n      })\n      .catch(err => console.error(err));\n  };\n\n  formatDate = date => format(date, \"dddd, MMMM Do, YYYY\");\n\n  render() {\n    const { classes, auth } = this.props;\n    const {\n      isLoading,\n      posts,\n      user,\n      isAuth,\n      isFollowing,\n      isDeletingPost\n    } = this.state;\n\n    return (\n      <Paper className={classes.root} elevation={4}>\n        <Typography\n        >\n         <Title>Introduction</Title>\n        </Typography>\n\n        {isLoading ? (\n            <Spin/>\n        ) : (\n          <List dense>\n            <ListItem>\n              <ListItemAvatar>\n                <Avatar src={user.avatar} className={classes.bigAvatar} />\n              </ListItemAvatar>\n              <ListItemText primary={user.name} secondary={user.email} />\n\n              {/* Auth - Edit Buttons / UnAuth - Follow Buttons */}\n              {isAuth ? (\n                <ListItemSecondaryAction>\n                  <Link href=\"/edit-profile\">\n                    <a>\n                      <IconButton color=\"primary\">\n                        <Edit />\n                      </IconButton>\n                    </a>\n                  </Link>\n                  <DeleteUser user={user} />\n                </ListItemSecondaryAction>\n              ) : (\n                <FollowUser\n                  isFollowing={isFollowing}\n                  toggleFollow={this.toggleFollow}\n                />\n              )}\n            </ListItem>\n            <Divider />\n            <ListItem>\n              <ListItemText\n                primary={user.about}\n                secondary={`Joined: ${this.formatDate(user.createdAt)}`}\n              />\n            </ListItem>\n\n            {/* Display User's Posts, Following, and Followers */}\n            <ProfileTabs\n              auth={auth}\n              posts={posts}\n              user={user}\n              isDeletingPost={isDeletingPost}\n              handleDeletePost={this.handleDeletePost}\n              handleToggleLike={this.handleToggleLike}\n              handleAddComment={this.handleAddComment}\n              handleDeleteComment={this.handleDeleteComment}\n            />\n          </List>\n        )}\n      </Paper>\n    );\n  }\n}\n\nconst styles = theme => ({\n  root: {\n    padding: theme.spacing.unit * 3,\n    marginTop: theme.spacing.unit * 5,\n    margin: \"auto\",\n    [theme.breakpoints.up(\"sm\")]: {\n      width: 600\n    }\n  },\n  title: {\n    color: theme.palette.primary.main\n  },\n  progress: {\n    margin: theme.spacing.unit * 2\n  },\n  progressContainer: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    flexDirection: \"column\"\n  },\n  bigAvatar: {\n    width: 60,\n    height: 60,\n    margin: 10\n  }\n});\n\nProfile.getInitialProps = authInitialProps(true);\n\nexport default withStyles(styles)(Profile);\n"]},"metadata":{},"sourceType":"module"}