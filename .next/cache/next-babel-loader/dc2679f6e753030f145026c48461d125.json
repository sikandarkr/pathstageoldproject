{"ast":null,"code":"import \"antd/lib/spin/style\";\nimport _Spin from \"antd/lib/spin\";\nimport \"antd/lib/typography/style\";\nimport _Typography from \"antd/lib/typography\";\nimport \"antd/lib/title/style\";\nimport _Title from \"antd/lib/title\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/sikandarkumarkumar/Desktop/Others/exampl/pages/profile.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport format from \"date-fns/format\";\nimport Link from \"next/link\";\nimport ProfileTabs from \"../components/profile/ProfileTabs\";\nimport DeleteUser from \"../components/profile/DeleteUser\";\nimport FollowUser from \"../components/profile/FollowUser\";\nimport { authInitialProps } from \"../lib/auth\";\nimport { getUser, getPostsByUser, deletePost, likePost, unlikePost, addComment, deleteComment } from \"../lib/api\";\n\nvar Profile = /*#__PURE__*/function (_React$Component) {\n  _inherits(Profile, _React$Component);\n\n  var _super = _createSuper(Profile);\n\n  function Profile() {\n    var _this;\n\n    _classCallCheck(this, Profile);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      user: null,\n      posts: [],\n      isAuth: false,\n      isFollowing: false,\n      isLoading: true,\n      isDeletingPost: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"checkFollow\", function (auth, user) {\n      return user.followers.findIndex(function (follower) {\n        return follower._id === auth.user._id;\n      }) > -1;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"toggleFollow\", function (sendRequest) {\n      var userId = _this.props.userId;\n      var isFollowing = _this.state.isFollowing;\n      sendRequest(userId).then(function () {\n        _this.setState({\n          isFollowing: !isFollowing\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleDeletePost\", function (deletedPost) {\n      _this.setState({\n        isDeletingPost: true\n      });\n\n      deletePost(deletedPost._id).then(function (postData) {\n        var postIndex = _this.state.posts.findIndex(function (post) {\n          return post._id === postData._id;\n        });\n\n        var updatedPosts = [].concat(_toConsumableArray(_this.state.posts.slice(0, postIndex)), _toConsumableArray(_this.state.posts.slice(postIndex + 1)));\n\n        _this.setState({\n          posts: updatedPosts,\n          isDeletingPost: false\n        });\n      })[\"catch\"](function (err) {\n        console.error(err);\n\n        _this.setState({\n          isDeletingPost: false\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleToggleLike\", function (post) {\n      var auth = _this.props.auth;\n      var isPostLiked = post.likes.includes(auth.user._id);\n      var sendRequest = isPostLiked ? unlikePost : likePost;\n      sendRequest(post._id).then(function (postData) {\n        var postIndex = _this.state.posts.findIndex(function (post) {\n          return post._id === postData._id;\n        });\n\n        var updatedPosts = [].concat(_toConsumableArray(_this.state.posts.slice(0, postIndex)), [postData], _toConsumableArray(_this.state.posts.slice(postIndex + 1)));\n\n        _this.setState({\n          posts: updatedPosts\n        });\n      })[\"catch\"](function (err) {\n        return console.error(err);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleAddComment\", function (postId, text) {\n      var comment = {\n        text: text\n      };\n      addComment(postId, comment).then(function (postData) {\n        var postIndex = _this.state.posts.findIndex(function (post) {\n          return post._id === postData._id;\n        });\n\n        var updatedPosts = [].concat(_toConsumableArray(_this.state.posts.slice(0, postIndex)), [postData], _toConsumableArray(_this.state.posts.slice(postIndex + 1)));\n\n        _this.setState({\n          posts: updatedPosts\n        });\n      })[\"catch\"](function (err) {\n        return console.error(err);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleDeleteComment\", function (postId, comment) {\n      deleteComment(postId, comment).then(function (postData) {\n        var postIndex = _this.state.posts.findIndex(function (post) {\n          return post._id === postData._id;\n        });\n\n        var updatedPosts = [].concat(_toConsumableArray(_this.state.posts.slice(0, postIndex)), [postData], _toConsumableArray(_this.state.posts.slice(postIndex + 1)));\n\n        _this.setState({\n          posts: updatedPosts\n        });\n      })[\"catch\"](function (err) {\n        return console.error(err);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"formatDate\", function (date) {\n      return format(date, \"dddd, MMMM Do, YYYY\");\n    });\n\n    return _this;\n  }\n\n  _createClass(Profile, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          userId = _this$props.userId,\n          auth = _this$props.auth;\n      getUser(userId).then( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(user) {\n          var isAuth, isFollowing, posts;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  isAuth = auth.user._id === userId;\n                  isFollowing = _this2.checkFollow(auth, user);\n                  _context.next = 4;\n                  return getPostsByUser(userId);\n\n                case 4:\n                  posts = _context.sent;\n\n                  _this2.setState({\n                    user: user,\n                    posts: posts,\n                    isAuth: isAuth,\n                    isFollowing: isFollowing,\n                    isLoading: false\n                  });\n\n                case 6:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          classes = _this$props2.classes,\n          auth = _this$props2.auth;\n      var _this$state = this.state,\n          isLoading = _this$state.isLoading,\n          posts = _this$state.posts,\n          user = _this$state.user,\n          isAuth = _this$state.isAuth,\n          isFollowing = _this$state.isFollowing,\n          isDeletingPost = _this$state.isDeletingPost;\n      return __jsx(Paper, {\n        className: classes.root,\n        elevation: 4,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 7\n        }\n      }, __jsx(_Typography, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 9\n        }\n      }, __jsx(_Title, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 10\n        }\n      }, \"Introduction\")), isLoading ? __jsx(_Spin, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 13\n        }\n      }) : __jsx(List, {\n        dense: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }\n      }, __jsx(ListItem, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 13\n        }\n      }, __jsx(ListItemAvatar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 15\n        }\n      }, __jsx(Avatar, {\n        src: user.avatar,\n        className: classes.bigAvatar,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 17\n        }\n      })), __jsx(ListItemText, {\n        primary: user.name,\n        secondary: user.email,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 15\n        }\n      }), isAuth ? __jsx(ListItemSecondaryAction, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 17\n        }\n      }, __jsx(Link, {\n        href: \"/edit-profile\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 19\n        }\n      }, __jsx(\"a\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 21\n        }\n      }, __jsx(IconButton, {\n        color: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 23\n        }\n      }, __jsx(Edit, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 25\n        }\n      })))), __jsx(DeleteUser, {\n        user: user,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 19\n        }\n      })) : __jsx(FollowUser, {\n        isFollowing: isFollowing,\n        toggleFollow: this.toggleFollow,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 17\n        }\n      })), __jsx(Divider, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 13\n        }\n      }), __jsx(ListItem, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 13\n        }\n      }, __jsx(ListItemText, {\n        primary: user.about,\n        secondary: \"Joined: \".concat(this.formatDate(user.createdAt)),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 15\n        }\n      })), __jsx(ProfileTabs, {\n        auth: auth,\n        posts: posts,\n        user: user,\n        isDeletingPost: isDeletingPost,\n        handleDeletePost: this.handleDeletePost,\n        handleToggleLike: this.handleToggleLike,\n        handleAddComment: this.handleAddComment,\n        handleDeleteComment: this.handleDeleteComment,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 13\n        }\n      })));\n    }\n  }]);\n\n  return Profile;\n}(React.Component);\n\nvar styles = function styles(theme) {\n  return {\n    root: _defineProperty({\n      padding: theme.spacing.unit * 3,\n      marginTop: theme.spacing.unit * 5,\n      margin: \"auto\"\n    }, theme.breakpoints.up(\"sm\"), {\n      width: 600\n    }),\n    title: {\n      color: theme.palette.primary.main\n    },\n    progress: {\n      margin: theme.spacing.unit * 2\n    },\n    progressContainer: {\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      flexDirection: \"column\"\n    },\n    bigAvatar: {\n      width: 60,\n      height: 60,\n      margin: 10\n    }\n  };\n};\n\nProfile.getInitialProps = authInitialProps(true);\nexport default withStyles(styles)(Profile);","map":{"version":3,"sources":["/Users/sikandarkumarkumar/Desktop/Others/exampl/pages/profile.js"],"names":["format","Link","ProfileTabs","DeleteUser","FollowUser","authInitialProps","getUser","getPostsByUser","deletePost","likePost","unlikePost","addComment","deleteComment","Profile","user","posts","isAuth","isFollowing","isLoading","isDeletingPost","auth","followers","findIndex","follower","_id","sendRequest","userId","props","state","then","setState","deletedPost","postData","postIndex","post","updatedPosts","slice","err","console","error","isPostLiked","likes","includes","postId","text","comment","date","checkFollow","classes","root","avatar","bigAvatar","name","email","toggleFollow","about","formatDate","createdAt","handleDeletePost","handleToggleLike","handleAddComment","handleDeleteComment","React","Component","styles","theme","padding","spacing","unit","marginTop","margin","breakpoints","up","width","title","color","palette","primary","main","progress","progressContainer","display","alignItems","justifyContent","flexDirection","height","getInitialProps","withStyles"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,MAAP,MAAmB,iBAAnB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AAEA,OAAOC,WAAP,MAAwB,mCAAxB;AACA,OAAOC,UAAP,MAAuB,kCAAvB;AACA,OAAOC,UAAP,MAAuB,kCAAvB;AACA,SAASC,gBAAT,QAAiC,aAAjC;AACA,SACEC,OADF,EAEEC,cAFF,EAGEC,UAHF,EAIEC,QAJF,EAKEC,UALF,EAMEC,UANF,EAOEC,aAPF,QAQO,YARP;;IAUMC,O;;;;;;;;;;;;;;;;4DACI;AACNC,MAAAA,IAAI,EAAE,IADA;AAENC,MAAAA,KAAK,EAAE,EAFD;AAGNC,MAAAA,MAAM,EAAE,KAHF;AAINC,MAAAA,WAAW,EAAE,KAJP;AAKNC,MAAAA,SAAS,EAAE,IALL;AAMNC,MAAAA,cAAc,EAAE;AANV,K;;kEA0BM,UAACC,IAAD,EAAON,IAAP,EAAgB;AAC5B,aACEA,IAAI,CAACO,SAAL,CAAeC,SAAf,CAAyB,UAAAC,QAAQ;AAAA,eAAIA,QAAQ,CAACC,GAAT,KAAiBJ,IAAI,CAACN,IAAL,CAAUU,GAA/B;AAAA,OAAjC,IAAuE,CAAC,CAD1E;AAGD,K;;mEAEc,UAAAC,WAAW,EAAI;AAAA,UACpBC,MADoB,GACT,MAAKC,KADI,CACpBD,MADoB;AAAA,UAEpBT,WAFoB,GAEJ,MAAKW,KAFD,CAEpBX,WAFoB;AAI5BQ,MAAAA,WAAW,CAACC,MAAD,CAAX,CAAoBG,IAApB,CAAyB,YAAM;AAC7B,cAAKC,QAAL,CAAc;AAAEb,UAAAA,WAAW,EAAE,CAACA;AAAhB,SAAd;AACD,OAFD;AAGD,K;;uEAEkB,UAAAc,WAAW,EAAI;AAChC,YAAKD,QAAL,CAAc;AAAEX,QAAAA,cAAc,EAAE;AAAlB,OAAd;;AACAX,MAAAA,UAAU,CAACuB,WAAW,CAACP,GAAb,CAAV,CACGK,IADH,CACQ,UAAAG,QAAQ,EAAI;AAChB,YAAMC,SAAS,GAAG,MAAKL,KAAL,CAAWb,KAAX,CAAiBO,SAAjB,CAChB,UAAAY,IAAI;AAAA,iBAAIA,IAAI,CAACV,GAAL,KAAaQ,QAAQ,CAACR,GAA1B;AAAA,SADY,CAAlB;;AAGA,YAAMW,YAAY,gCACb,MAAKP,KAAL,CAAWb,KAAX,CAAiBqB,KAAjB,CAAuB,CAAvB,EAA0BH,SAA1B,CADa,sBAEb,MAAKL,KAAL,CAAWb,KAAX,CAAiBqB,KAAjB,CAAuBH,SAAS,GAAG,CAAnC,CAFa,EAAlB;;AAIA,cAAKH,QAAL,CAAc;AACZf,UAAAA,KAAK,EAAEoB,YADK;AAEZhB,UAAAA,cAAc,EAAE;AAFJ,SAAd;AAID,OAbH,WAcS,UAAAkB,GAAG,EAAI;AACZC,QAAAA,OAAO,CAACC,KAAR,CAAcF,GAAd;;AACA,cAAKP,QAAL,CAAc;AAAEX,UAAAA,cAAc,EAAE;AAAlB,SAAd;AACD,OAjBH;AAkBD,K;;uEAEkB,UAAAe,IAAI,EAAI;AAAA,UACjBd,IADiB,GACR,MAAKO,KADG,CACjBP,IADiB;AAGzB,UAAMoB,WAAW,GAAGN,IAAI,CAACO,KAAL,CAAWC,QAAX,CAAoBtB,IAAI,CAACN,IAAL,CAAUU,GAA9B,CAApB;AACA,UAAMC,WAAW,GAAGe,WAAW,GAAG9B,UAAH,GAAgBD,QAA/C;AACAgB,MAAAA,WAAW,CAACS,IAAI,CAACV,GAAN,CAAX,CACGK,IADH,CACQ,UAAAG,QAAQ,EAAI;AAChB,YAAMC,SAAS,GAAG,MAAKL,KAAL,CAAWb,KAAX,CAAiBO,SAAjB,CAChB,UAAAY,IAAI;AAAA,iBAAIA,IAAI,CAACV,GAAL,KAAaQ,QAAQ,CAACR,GAA1B;AAAA,SADY,CAAlB;;AAGA,YAAMW,YAAY,gCACb,MAAKP,KAAL,CAAWb,KAAX,CAAiBqB,KAAjB,CAAuB,CAAvB,EAA0BH,SAA1B,CADa,IAEhBD,QAFgB,sBAGb,MAAKJ,KAAL,CAAWb,KAAX,CAAiBqB,KAAjB,CAAuBH,SAAS,GAAG,CAAnC,CAHa,EAAlB;;AAKA,cAAKH,QAAL,CAAc;AAAEf,UAAAA,KAAK,EAAEoB;AAAT,SAAd;AACD,OAXH,WAYS,UAAAE,GAAG;AAAA,eAAIC,OAAO,CAACC,KAAR,CAAcF,GAAd,CAAJ;AAAA,OAZZ;AAaD,K;;uEAEkB,UAACM,MAAD,EAASC,IAAT,EAAkB;AACnC,UAAMC,OAAO,GAAG;AAAED,QAAAA,IAAI,EAAJA;AAAF,OAAhB;AACAjC,MAAAA,UAAU,CAACgC,MAAD,EAASE,OAAT,CAAV,CACGhB,IADH,CACQ,UAAAG,QAAQ,EAAI;AAChB,YAAMC,SAAS,GAAG,MAAKL,KAAL,CAAWb,KAAX,CAAiBO,SAAjB,CAChB,UAAAY,IAAI;AAAA,iBAAIA,IAAI,CAACV,GAAL,KAAaQ,QAAQ,CAACR,GAA1B;AAAA,SADY,CAAlB;;AAGA,YAAMW,YAAY,gCACb,MAAKP,KAAL,CAAWb,KAAX,CAAiBqB,KAAjB,CAAuB,CAAvB,EAA0BH,SAA1B,CADa,IAEhBD,QAFgB,sBAGb,MAAKJ,KAAL,CAAWb,KAAX,CAAiBqB,KAAjB,CAAuBH,SAAS,GAAG,CAAnC,CAHa,EAAlB;;AAKA,cAAKH,QAAL,CAAc;AAAEf,UAAAA,KAAK,EAAEoB;AAAT,SAAd;AACD,OAXH,WAYS,UAAAE,GAAG;AAAA,eAAIC,OAAO,CAACC,KAAR,CAAcF,GAAd,CAAJ;AAAA,OAZZ;AAaD,K;;0EAEqB,UAACM,MAAD,EAASE,OAAT,EAAqB;AACzCjC,MAAAA,aAAa,CAAC+B,MAAD,EAASE,OAAT,CAAb,CACGhB,IADH,CACQ,UAAAG,QAAQ,EAAI;AAChB,YAAMC,SAAS,GAAG,MAAKL,KAAL,CAAWb,KAAX,CAAiBO,SAAjB,CAChB,UAAAY,IAAI;AAAA,iBAAIA,IAAI,CAACV,GAAL,KAAaQ,QAAQ,CAACR,GAA1B;AAAA,SADY,CAAlB;;AAGA,YAAMW,YAAY,gCACb,MAAKP,KAAL,CAAWb,KAAX,CAAiBqB,KAAjB,CAAuB,CAAvB,EAA0BH,SAA1B,CADa,IAEhBD,QAFgB,sBAGb,MAAKJ,KAAL,CAAWb,KAAX,CAAiBqB,KAAjB,CAAuBH,SAAS,GAAG,CAAnC,CAHa,EAAlB;;AAKA,cAAKH,QAAL,CAAc;AAAEf,UAAAA,KAAK,EAAEoB;AAAT,SAAd;AACD,OAXH,WAYS,UAAAE,GAAG;AAAA,eAAIC,OAAO,CAACC,KAAR,CAAcF,GAAd,CAAJ;AAAA,OAZZ;AAaD,K;;iEAEY,UAAAS,IAAI;AAAA,aAAI9C,MAAM,CAAC8C,IAAD,EAAO,qBAAP,CAAV;AAAA,K;;;;;;;wCA3GG;AAAA;;AAAA,wBACO,KAAKnB,KADZ;AAAA,UACVD,MADU,eACVA,MADU;AAAA,UACFN,IADE,eACFA,IADE;AAGlBd,MAAAA,OAAO,CAACoB,MAAD,CAAP,CAAgBG,IAAhB;AAAA,4EAAqB,iBAAMf,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACbE,kBAAAA,MADa,GACJI,IAAI,CAACN,IAAL,CAAUU,GAAV,KAAkBE,MADd;AAEbT,kBAAAA,WAFa,GAEC,MAAI,CAAC8B,WAAL,CAAiB3B,IAAjB,EAAuBN,IAAvB,CAFD;AAAA;AAAA,yBAGCP,cAAc,CAACmB,MAAD,CAHf;;AAAA;AAGbX,kBAAAA,KAHa;;AAInB,kBAAA,MAAI,CAACe,QAAL,CAAc;AACZhB,oBAAAA,IAAI,EAAJA,IADY;AAEZC,oBAAAA,KAAK,EAALA,KAFY;AAGZC,oBAAAA,MAAM,EAANA,MAHY;AAIZC,oBAAAA,WAAW,EAAXA,WAJY;AAKZC,oBAAAA,SAAS,EAAE;AALC,mBAAd;;AAJmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAArB;;AAAA;AAAA;AAAA;AAAA;AAYD;;;6BA8FQ;AAAA,yBACmB,KAAKS,KADxB;AAAA,UACCqB,OADD,gBACCA,OADD;AAAA,UACU5B,IADV,gBACUA,IADV;AAAA,wBASH,KAAKQ,KATF;AAAA,UAGLV,SAHK,eAGLA,SAHK;AAAA,UAILH,KAJK,eAILA,KAJK;AAAA,UAKLD,IALK,eAKLA,IALK;AAAA,UAMLE,MANK,eAMLA,MANK;AAAA,UAOLC,WAPK,eAOLA,WAPK;AAAA,UAQLE,cARK,eAQLA,cARK;AAWP,aACE,MAAC,KAAD;AAAO,QAAA,SAAS,EAAE6B,OAAO,CAACC,IAA1B;AAAgC,QAAA,SAAS,EAAE,CAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFD,CADF,EAMG/B,SAAS,GACN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADM,GAGR,MAAC,IAAD;AAAM,QAAA,KAAK,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,MAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,MAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,MAAC,MAAD;AAAQ,QAAA,GAAG,EAAEJ,IAAI,CAACoC,MAAlB;AAA0B,QAAA,SAAS,EAAEF,OAAO,CAACG,SAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,EAIE,MAAC,YAAD;AAAc,QAAA,OAAO,EAAErC,IAAI,CAACsC,IAA5B;AAAkC,QAAA,SAAS,EAAEtC,IAAI,CAACuC,KAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJF,EAOGrC,MAAM,GACL,MAAC,uBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,MAAC,IAAD;AAAM,QAAA,IAAI,EAAC,eAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,MAAC,UAAD;AAAY,QAAA,KAAK,EAAC,SAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,CADF,CADF,EAQE,MAAC,UAAD;AAAY,QAAA,IAAI,EAAEF,IAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QARF,CADK,GAYL,MAAC,UAAD;AACE,QAAA,WAAW,EAAEG,WADf;AAEE,QAAA,YAAY,EAAE,KAAKqC,YAFrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAnBJ,CADF,EA0BE,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QA1BF,EA2BE,MAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,MAAC,YAAD;AACE,QAAA,OAAO,EAAExC,IAAI,CAACyC,KADhB;AAEE,QAAA,SAAS,oBAAa,KAAKC,UAAL,CAAgB1C,IAAI,CAAC2C,SAArB,CAAb,CAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CA3BF,EAmCE,MAAC,WAAD;AACE,QAAA,IAAI,EAAErC,IADR;AAEE,QAAA,KAAK,EAAEL,KAFT;AAGE,QAAA,IAAI,EAAED,IAHR;AAIE,QAAA,cAAc,EAAEK,cAJlB;AAKE,QAAA,gBAAgB,EAAE,KAAKuC,gBALzB;AAME,QAAA,gBAAgB,EAAE,KAAKC,gBANzB;AAOE,QAAA,gBAAgB,EAAE,KAAKC,gBAPzB;AAQE,QAAA,mBAAmB,EAAE,KAAKC,mBAR5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAnCF,CATJ,CADF;AA2DD;;;;EA7LmBC,KAAK,CAACC,S;;AAgM5B,IAAMC,MAAM,GAAG,SAATA,MAAS,CAAAC,KAAK;AAAA,SAAK;AACvBhB,IAAAA,IAAI;AACFiB,MAAAA,OAAO,EAAED,KAAK,CAACE,OAAN,CAAcC,IAAd,GAAqB,CAD5B;AAEFC,MAAAA,SAAS,EAAEJ,KAAK,CAACE,OAAN,CAAcC,IAAd,GAAqB,CAF9B;AAGFE,MAAAA,MAAM,EAAE;AAHN,OAIDL,KAAK,CAACM,WAAN,CAAkBC,EAAlB,CAAqB,IAArB,CAJC,EAI4B;AAC5BC,MAAAA,KAAK,EAAE;AADqB,KAJ5B,CADmB;AASvBC,IAAAA,KAAK,EAAE;AACLC,MAAAA,KAAK,EAAEV,KAAK,CAACW,OAAN,CAAcC,OAAd,CAAsBC;AADxB,KATgB;AAYvBC,IAAAA,QAAQ,EAAE;AACRT,MAAAA,MAAM,EAAEL,KAAK,CAACE,OAAN,CAAcC,IAAd,GAAqB;AADrB,KAZa;AAevBY,IAAAA,iBAAiB,EAAE;AACjBC,MAAAA,OAAO,EAAE,MADQ;AAEjBC,MAAAA,UAAU,EAAE,QAFK;AAGjBC,MAAAA,cAAc,EAAE,QAHC;AAIjBC,MAAAA,aAAa,EAAE;AAJE,KAfI;AAqBvBjC,IAAAA,SAAS,EAAE;AACTsB,MAAAA,KAAK,EAAE,EADE;AAETY,MAAAA,MAAM,EAAE,EAFC;AAGTf,MAAAA,MAAM,EAAE;AAHC;AArBY,GAAL;AAAA,CAApB;;AA4BAzD,OAAO,CAACyE,eAAR,GAA0BjF,gBAAgB,CAAC,IAAD,CAA1C;AAEA,eAAekF,UAAU,CAACvB,MAAD,CAAV,CAAmBnD,OAAnB,CAAf","sourcesContent":["import format from \"date-fns/format\";\nimport Link from \"next/link\";\nimport { Spin ,Typography,Title} from 'antd';\nimport ProfileTabs from \"../components/profile/ProfileTabs\";\nimport DeleteUser from \"../components/profile/DeleteUser\";\nimport FollowUser from \"../components/profile/FollowUser\";\nimport { authInitialProps } from \"../lib/auth\";\nimport {\n  getUser,\n  getPostsByUser,\n  deletePost,\n  likePost,\n  unlikePost,\n  addComment,\n  deleteComment\n} from \"../lib/api\";\n\nclass Profile extends React.Component {\n  state = {\n    user: null,\n    posts: [],\n    isAuth: false,\n    isFollowing: false,\n    isLoading: true,\n    isDeletingPost: false\n  };\n\n  componentDidMount() {\n    const { userId, auth } = this.props;\n\n    getUser(userId).then(async user => {\n      const isAuth = auth.user._id === userId;\n      const isFollowing = this.checkFollow(auth, user);\n      const posts = await getPostsByUser(userId);\n      this.setState({\n        user,\n        posts,\n        isAuth,\n        isFollowing,\n        isLoading: false\n      });\n    });\n  }\n\n  checkFollow = (auth, user) => {\n    return (\n      user.followers.findIndex(follower => follower._id === auth.user._id) > -1\n    );\n  };\n\n  toggleFollow = sendRequest => {\n    const { userId } = this.props;\n    const { isFollowing } = this.state;\n\n    sendRequest(userId).then(() => {\n      this.setState({ isFollowing: !isFollowing });\n    });\n  };\n\n  handleDeletePost = deletedPost => {\n    this.setState({ isDeletingPost: true });\n    deletePost(deletedPost._id)\n      .then(postData => {\n        const postIndex = this.state.posts.findIndex(\n          post => post._id === postData._id\n        );\n        const updatedPosts = [\n          ...this.state.posts.slice(0, postIndex),\n          ...this.state.posts.slice(postIndex + 1)\n        ];\n        this.setState({\n          posts: updatedPosts,\n          isDeletingPost: false\n        });\n      })\n      .catch(err => {\n        console.error(err);\n        this.setState({ isDeletingPost: false });\n      });\n  };\n\n  handleToggleLike = post => {\n    const { auth } = this.props;\n\n    const isPostLiked = post.likes.includes(auth.user._id);\n    const sendRequest = isPostLiked ? unlikePost : likePost;\n    sendRequest(post._id)\n      .then(postData => {\n        const postIndex = this.state.posts.findIndex(\n          post => post._id === postData._id\n        );\n        const updatedPosts = [\n          ...this.state.posts.slice(0, postIndex),\n          postData,\n          ...this.state.posts.slice(postIndex + 1)\n        ];\n        this.setState({ posts: updatedPosts });\n      })\n      .catch(err => console.error(err));\n  };\n\n  handleAddComment = (postId, text) => {\n    const comment = { text };\n    addComment(postId, comment)\n      .then(postData => {\n        const postIndex = this.state.posts.findIndex(\n          post => post._id === postData._id\n        );\n        const updatedPosts = [\n          ...this.state.posts.slice(0, postIndex),\n          postData,\n          ...this.state.posts.slice(postIndex + 1)\n        ];\n        this.setState({ posts: updatedPosts });\n      })\n      .catch(err => console.error(err));\n  };\n\n  handleDeleteComment = (postId, comment) => {\n    deleteComment(postId, comment)\n      .then(postData => {\n        const postIndex = this.state.posts.findIndex(\n          post => post._id === postData._id\n        );\n        const updatedPosts = [\n          ...this.state.posts.slice(0, postIndex),\n          postData,\n          ...this.state.posts.slice(postIndex + 1)\n        ];\n        this.setState({ posts: updatedPosts });\n      })\n      .catch(err => console.error(err));\n  };\n\n  formatDate = date => format(date, \"dddd, MMMM Do, YYYY\");\n\n  render() {\n    const { classes, auth } = this.props;\n    const {\n      isLoading,\n      posts,\n      user,\n      isAuth,\n      isFollowing,\n      isDeletingPost\n    } = this.state;\n\n    return (\n      <Paper className={classes.root} elevation={4}>\n        <Typography\n        >\n         <Title>Introduction</Title>\n        </Typography>\n\n        {isLoading ? (\n            <Spin/>\n        ) : (\n          <List dense>\n            <ListItem>\n              <ListItemAvatar>\n                <Avatar src={user.avatar} className={classes.bigAvatar} />\n              </ListItemAvatar>\n              <ListItemText primary={user.name} secondary={user.email} />\n\n              {/* Auth - Edit Buttons / UnAuth - Follow Buttons */}\n              {isAuth ? (\n                <ListItemSecondaryAction>\n                  <Link href=\"/edit-profile\">\n                    <a>\n                      <IconButton color=\"primary\">\n                        <Edit />\n                      </IconButton>\n                    </a>\n                  </Link>\n                  <DeleteUser user={user} />\n                </ListItemSecondaryAction>\n              ) : (\n                <FollowUser\n                  isFollowing={isFollowing}\n                  toggleFollow={this.toggleFollow}\n                />\n              )}\n            </ListItem>\n            <Divider />\n            <ListItem>\n              <ListItemText\n                primary={user.about}\n                secondary={`Joined: ${this.formatDate(user.createdAt)}`}\n              />\n            </ListItem>\n\n            {/* Display User's Posts, Following, and Followers */}\n            <ProfileTabs\n              auth={auth}\n              posts={posts}\n              user={user}\n              isDeletingPost={isDeletingPost}\n              handleDeletePost={this.handleDeletePost}\n              handleToggleLike={this.handleToggleLike}\n              handleAddComment={this.handleAddComment}\n              handleDeleteComment={this.handleDeleteComment}\n            />\n          </List>\n        )}\n      </Paper>\n    );\n  }\n}\n\nconst styles = theme => ({\n  root: {\n    padding: theme.spacing.unit * 3,\n    marginTop: theme.spacing.unit * 5,\n    margin: \"auto\",\n    [theme.breakpoints.up(\"sm\")]: {\n      width: 600\n    }\n  },\n  title: {\n    color: theme.palette.primary.main\n  },\n  progress: {\n    margin: theme.spacing.unit * 2\n  },\n  progressContainer: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    flexDirection: \"column\"\n  },\n  bigAvatar: {\n    width: 60,\n    height: 60,\n    margin: 10\n  }\n});\n\nProfile.getInitialProps = authInitialProps(true);\n\nexport default withStyles(styles)(Profile);\n"]},"metadata":{},"sourceType":"module"}